<!DOCTYPE html>
<html class="dark" lang="en">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>Calories AI - Secure Checkout</title>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <script src="https://js.stripe.com/v3/"></script> <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap" rel="stylesheet"/>
    <script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: { "primary": "#f4c025", "background-dark": "#141414" },
                    fontFamily: { "display": ["Inter"] }
                },
            },
        }
    </script>
</head>
<body class="bg-[#141414] font-display text-white min-h-screen flex flex-col items-center p-6">

    <div class="w-full max-w-md flex items-center justify-between mb-8">
        <a href="pro_upgrade_modal.html" class="flex items-center justify-center size-10 rounded-full bg-white/5 hover:bg-white/10 transition-colors">
            <span class="material-symbols-outlined text-sm">arrow_back_ios_new</span>
        </a>
        <h1 class="text-lg font-bold">Secure Checkout</h1>
        <div class="size-10"></div>
    </div>

    <div class="w-full max-w-md bg-white/5 border border-white/10 rounded-2xl p-6 mb-8">
        <p class="text-white/60 text-xs font-bold uppercase tracking-widest mb-4">Order Summary</p>
        <div class="flex justify-between items-center mb-2">
            <span class="font-bold text-lg">Calories AI Pro</span>
            <span class="font-bold text-lg">$9.99</span>
        </div>
        <div class="flex justify-between items-center text-sm text-white/60">
            <span>Billed Monthly</span>
            <span>Recurring</span>
        </div>
        <div class="h-px w-full bg-white/10 my-4"></div>
        <div class="flex justify-between items-center">
            <span class="font-bold text-lg">Total due today</span>
            <span class="font-bold text-2xl text-primary">$9.99</span>
        </div>
    </div>

    <div class="w-full max-w-md space-y-4 mb-8">
        <div class="bg-white/5 border border-white/10 rounded-xl p-4 flex items-center gap-4">
            <div class="p-2 bg-white rounded-lg">
                <img src="https://upload.wikimedia.org/wikipedia/commons/b/b5/Stripe_Logo%2C_revised_2016.svg" alt="Stripe" class="h-5">
            </div>
            <div>
                <p class="font-bold text-sm">Encrypted Payment</p>
                <p class="text-xs text-white/50">You will be redirected to Stripe to complete your purchase securely.</p>
            </div>
        </div>
        
        <div class="flex gap-2 justify-center opacity-50 grayscale">
            <img src="https://upload.wikimedia.org/wikipedia/commons/5/5e/Visa_Inc._logo.svg" class="h-6">
            <img src="https://upload.wikimedia.org/wikipedia/commons/2/2a/Mastercard-logo.svg" class="h-6">
            <img src="https://upload.wikimedia.org/wikipedia/commons/b/b5/PayPal.svg" class="h-6">
        </div>
    </div>

    <div class="flex items-center gap-2 text-white/40 text-xs font-medium mb-auto">
        <span class="material-symbols-outlined text-sm">lock</span>
        256-bit SSL Secure Checkout
    </div>

    <div class="w-full max-w-md mt-6">
        <button id="checkout-btn" onclick="startStripeCheckout()" class="flex items-center justify-center w-full h-16 bg-primary text-[#141414] font-bold text-lg rounded-2xl shadow-lg shadow-primary/20 active:scale-95 transition-transform hover:brightness-110 gap-2">
            <span>Proceed to Stripe</span>
            <span class="material-symbols-outlined">open_in_new</span>
        </button>
    </div>

    <script type="module">
        import { db, auth } from "./firebase-config.js";
        import { collection, addDoc, onSnapshot } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        // ðŸ”´ REPLACE WITH YOUR PUBLISHABLE KEY from Stripe Dashboard ðŸ”´
        const STRIPE_PUBLISHABLE_KEY = "pk_test_51So2tlPbR5fQaDvZF5BCDleZMmkZGQGgotjovXkWFinxExrA0OOyAIhqZXpzRmNsz1gjuzMgGwqeTiVFCmZpGg5J00nB94JPOk"; 
        
        // Initialize Stripe
        let stripe;
        try {
            stripe = Stripe(STRIPE_PUBLISHABLE_KEY);
        } catch (e) {
            console.warn("Stripe key invalid or missing.");
        }

       window.startStripeCheckout = function() {
            const btn = document.getElementById('checkout-btn');
            
            // 1. UI Feedback (Show loading spinner)
            btn.innerHTML = `<span class="material-symbols-outlined animate-spin">progress_activity</span> Redirecting...`;
            btn.disabled = true;
            btn.style.opacity = "0.7";

            // 2. Redirect to your REAL Stripe Page
            // ðŸ”´ PASTE YOUR COPIED STRIPE LINK BELOW ðŸ”´
            window.location.href = "https://buy.stripe.com/test_28E5kF4xK4gu3i1bne2Ry00"; 
        }

        function resetBtn() {
            const btn = document.getElementById('checkout-btn');
            btn.innerHTML = `<span>Proceed to Stripe</span><span class="material-symbols-outlined">open_in_new</span>`;
            btn.disabled = false;
            btn.style.opacity = "1";
        }
        
        // Helper to simulate "Success" for option 1 fallback
        function simulateSuccess() {
             setTimeout(() => {
                window.location.href = "pro_daily_ai_report.html";
            }, 1000);
        }
    </script>

</body>
</html>